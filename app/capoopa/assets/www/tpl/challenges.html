<h2 class="toggle toggle-top">Défis</h2>
<ul class="list toggle-content">
  {{#each tpl}}
  <li data-item="{{ id }}">

      <div class="actions">
        <span class="validate add-challenge"></span>
        <span class="refuse"></span>
      </div>
      {{#if category}}
      <img src="img/category/{{category}}.png" alt="" class="thumb" />
      {{else}}
      <img src="img/category/default.png" alt="" class="thumb" />
      {{/if}}
      <h3 class="ui-li-heading">{{ title }}</h3>
      {{#if category}}
      <p class="ui-li-desc">{{ category }}</p>
      {{else}}
      <p class="ui-li-desc">divers</p>
      {{/if}}
  </li>
  {{/each}}
</ul>


<script type="text/javascript">
  $(document).ready(function(){
    toggleMenu();
    /*$('li').click( function(){
      showItem($(this).data('item'), 'challenge');
    });*/
    $('li .add-challenge').click( function(){
      var itemId = $(this).parents('li').data('item');
      console.log(itemId);


      
     /* var data = JSON.stringify({
        "userID":  1,
        "challengeID": {
          'id': 2,
          'title': 'Chocapic',
          'description': 'joij  iojo'
        },
        "status": "yeah"
      });

      console.log(data);

      $.ajax({
        type: "POST",
        url: 'http://localhost:8000/api/core/user/',
        contentType: 'application/json',
        data: data,
        success: function() {
          console.log("envoyé!");
        },
        error: function() {
          console.log("pas envoyé...");
        },
        dataType: 'json'
      });*/

      //postData('answer', data);
      
/*      var data = JSON.stringify({
        "userID":  1,
        "challengeID": 3,
        "status": "id simple"
      });*/
      
/*      var data = JSON.stringify({
        "userID":  1,
        "email":  "ann@e.fr",
        "avatar": "lapin", // => crée un user au lieu d'utiliser celui qui existe
        "challengeID": {
          'id': 2,
          'title': 'Chocapic',
          'description': 'joij  iojo'
        },
        "status": "all object"
      });*/
            
      var data = JSON.stringify({
        "userID":  "/api/core/user/1/",
        "challengeID": "/api/core/challenge/2/",
        "status": "answer uri"
      });
      


      console.log(data);

      $.ajax({
        type: "POST",
        url: 'http://localhost:8000/api/core/answer/',
        contentType: 'application/json',
        data: data,
        success: function() {
          console.log("envoyé!");
        },
        error: function(jqXHR, textStatus, errorThrown) {
          console.log(jqXHR, textStatus, errorThrown);
          console.log("pas envoyé...");
        },
        dataType: 'json'

      }).done(function( msg ) {
  console.log( msg );
});;

    });

  });
</script>