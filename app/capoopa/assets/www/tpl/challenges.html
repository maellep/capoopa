<h2 class="toggle toggle-top">DÃ©fis</h2>
<ul class="list toggle-content">
  {{#each tpl}}
  <li data-item="{{ id }}">

      <div class="actions">
        <span class="validate"></span>
        <span class="refuse"></span>
      </div>
      {{#if category}}
      <img src="img/category/{{category}}.png" alt="" class="thumb" />
      {{else}}
      <img src="img/category/default.png" alt="" class="thumb" />
      {{/if}}
      <h3 class="ui-li-heading">{{ title }}</h3>
      {{#if category}}
      <p class="ui-li-desc">{{ category }}</p>
      {{else}}
      <p class="ui-li-desc">divers</p>
      {{/if}}
  </li>
  {{/each}}
</ul>


<script type="text/javascript">
  $(document).ready(function(){
    toggleMenu();

    $('li .actions span').click( function(){
      var that = $(this).parents('li');
      var status, itemId, imageData;

      status = "refused";
      if ($(this).hasClass('validate'))
        status = "pending";

      itemId = $(this).parents('li').data('item');
      imageData = "plop";

      var data = JSON.stringify({
        "userID":  "/api/core/user/1/",
        "challengeID": "/api/core/challenge/" + itemId + '/',
        "status": status,
        "image": imageData
      });

      postData('answer/', data);

    });

  });
</script>